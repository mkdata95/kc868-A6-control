# π  KC868-A6 μ™„μ „ν• μ¤λ§νΈν™ μ μ–΄ μ‹μ¤ν…

> **ESPHome + Flask κΈ°λ°μ μ™„λ²½ν• λ¦΄λ μ΄ μ μ–΄ μ‹μ¤ν…**  
> μ‹¤μ  ν•λ“μ›¨μ–΄ μ μ–΄ + μ›Ή μΈν„°νμ΄μ¤ + μ•μ •μ μΈ μƒνƒ κ΄€λ¦¬

## π― ν”„λ΅μ νΈ κ°μ”

KC868-A6 ESP32 κΈ°λ° λ¦΄λ μ΄ λ³΄λ“λ¥Ό μ‚¬μ©ν• μ™„μ „ν• μ¤λ§νΈν™ μ μ–΄ μ‹μ¤ν…μ…λ‹λ‹¤.  
**μ‹¤μ  λ¦΄λ μ΄ μ μ–΄**κ°€ κ°€λ¥ν•λ©°, **μ•μ •μ μΈ μ›Ή μΈν„°νμ΄μ¤**λ¥Ό μ κ³µν•©λ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥

### π”§ ν•λ“μ›¨μ–΄ μ μ–΄
- β… **6κ° λ¦΄λ μ΄ μ™„λ²½ μ μ–΄** (μ‹¤μ  ν•λ“μ›¨μ–΄ ON/OFF)
- β… **PCF8574 I2C ν™•μ¥μΉ©** ν™μ©
- β… **μ¬λ°”λ¥Έ ν•€ λ§¤ν•‘** (SCL=GPIO15, SDA=GPIO4)

### π μ›Ή μΈν„°νμ΄μ¤  
- β… **Flask μ›Ήμ„λ²„** (localhost:5000)
- β… **μ‹¤μ‹κ°„ μƒνƒ ν‘μ‹** (μ΄λ΅/νμƒ‰ ν† κΈ€)
- β… **μ•μ •μ μΈ μƒνƒ μΊμ‹** μ‹μ¤ν…
- β… **λ°μ‘ν• UI** (λ¨λν• λ””μμΈ)

### π“΅ API ν†µν•©
- β… **ESPHome REST API** ν™μ©
- β… **ν•κΈ€ μ¤μ„μΉλ… μ§€μ›** (μ¤μ„μΉ1 β†’ ___1)
- β… **POST λ°©μ‹ μ μ–΄** + **GET λ°©μ‹ μƒνƒμ΅°ν**

## π€ λΉ λ¥Έ μ‹μ‘

### 1. ν•λ“μ›¨μ–΄ μ—°κ²°
```
KC868-A6 β†’ USB-C μΌ€μ΄λΈ” β†’ PC
KC868-A6 β†’ 12V μ™Έλ¶€μ „μ› (λ¦΄λ μ΄ μ‘λ™μ©)
```

### 2. ESPHome νμ›¨μ–΄ μ—…λ΅λ“
```bash
esphome run kc868-a6-basic.yaml --device COM4
```

### 3. Flask μ›Ήμ„λ²„ μ‹¤ν–‰
```bash
pip install -r requirements.txt
python app.py
```

### 4. μ›Ή μΈν„°νμ΄μ¤ μ ‘μ†
```
http://localhost:5000  # Flask μ›Ήμ„λ²„
http://192.168.0.100   # ESPHome μ§μ ‘ μ ‘μ†
```

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
KC8668-A6/
β”β”€β”€ π”§ ν•λ“μ›¨μ–΄ μ„¤μ •
β”‚   β””β”€β”€ kc868-a6-basic.yaml        # ESPHome μ„¤μ •
β”β”€β”€ π μ›Ήμ„λ²„
β”‚   β”β”€β”€ app.py                     # Flask λ©”μΈ μ„λ²„
β”‚   β”β”€β”€ templates/dashboard.html   # μ›Ή μΈν„°νμ΄μ¤
β”‚   β””β”€β”€ requirements.txt           # Python μμ΅΄μ„±
β”β”€β”€ π“ λ¬Έμ„
β”‚   β”β”€β”€ κ°λ°μ£Όμμ‚¬ν•­.md              # π ν•µμ‹¬ κ°λ° κ°€μ΄λ“
β”‚   β”β”€β”€ KC868-A6-ν”„λ΅μ νΈ-μ•„μ΄λ””μ–΄.md
β”‚   β””β”€β”€ μ•λ“λ΅μ΄λ“-RS485-μ μ–΄-κ°€μ΄λ“.md
β””β”€β”€ π—ƒοΈ κΈ°νƒ€
    β”β”€β”€ .gitignore
    β””β”€β”€ kc868_logs.db              # μ μ–΄ λ΅κ·Έ
```

## π”‘ ν•µμ‹¬ κΈ°μ  μ •λ³΄

### ESPHome API μ—”λ“ν¬μΈνΈ
```python
# μ μ–΄ (POST)
POST http://192.168.0.100/switch/___1/turn_on
POST http://192.168.0.100/switch/___1/turn_off

# μƒνƒ μ΅°ν (GET)
GET http://192.168.0.100/switch/___1
# μ‘λ‹µ: {"id": "switch-___1", "state": "ON", "value": true}
```

### I2C μ„¤μ • (μ¤‘μ”!)
```yaml
i2c:
  sda: GPIO4
  scl: GPIO15  # β οΈ GPIO15 (λ§μ€ μμ κ°€ GPIO5λ΅ μλ» ν‘κΈ°!)
```

### PCF8574 μ£Όμ†
```yaml
pcf8574:
  - id: relay_outputs
    address: 0x24      # λ¦΄λ μ΄ μ¶λ ¥
  - id: digital_inputs  
    address: 0x22      # λ””μ§€ν„Έ μ…λ ¥
```

## π› λ¬Έμ  ν•΄κ²°

### μμ£Ό λ°μƒν•λ” λ¬Έμ 
1. **λ¦΄λ μ΄κ°€ μ• μΌμ§** β†’ I2C ν•€ ν™•μΈ (SCL=GPIO15)
2. **μƒνƒκ°€ λ¶μ•μ •** β†’ μΊμ‹ μ‹μ¤ν…μΌλ΅ ν•΄κ²°λ¨
3. **API 404 μ¤λ¥** β†’ `___μ«μ` μ—”λ“ν¬μΈνΈ ν¨ν„΄ ν™•μΈ

### λ””λ²„κΉ…
```bash
# ESPHome λ΅κ·Έ ν™•μΈ
esphome logs kc868-a6-basic.yaml --device COM4

# Flask λ΅κ·Έ ν™•μΈ  
python app.py  # μ½μ†”μ—μ„ λ΅κ·Έ ν™•μΈ
```

## π“ μ„±κ³Ό λ° ν•΄κ²°λ λ¬Έμ 

### β… μ„±κ³µμ μΌλ΅ ν•΄κ²°ν• λ¬Έμ λ“¤
- π”§ **I2C ν•€ λ§¤ν•‘ μ¤λ¥** β†’ GPIO15 μ‚¬μ©μΌλ΅ ν•΄κ²°
- π **API μ—”λ“ν¬μΈνΈ λ°κ²¬** β†’ `___μ«μ` ν¨ν„΄ κ·λ…  
- π― **μƒνƒ ν‘μ‹ λ¶μ•μ •** β†’ μΊμ‹ μ‹μ¤ν…μΌλ΅ μ•μ •ν™”
- π“± **μ›Ή μΈν„°νμ΄μ¤ κµ¬ν„** β†’ λ°μ‘ν• UI μ™„μ„±
- π“ **μ™„λ²½ν• λ¬Έμ„ν™”** β†’ κ°λ°μ£Όμμ‚¬ν•­.md μ‘μ„±

### π‰ μµμΆ… κ²°κ³Ό
- **μ‹¤μ  λ¦΄λ μ΄ μ μ–΄** 100% μ‘λ™
- **μ›Ή μΈν„°νμ΄μ¤** μ™„λ²½ κµ¬ν„
- **μ•μ •μ μΈ μƒνƒ ν‘μ‹** λ¬Έμ  ν•΄κ²°
- **μ™„μ „ν• κ°λ° κ°€μ΄λ“** λ¬Έμ„ν™”

## π› οΈ κΈ°μ  μ¤νƒ

- **ν•λ“μ›¨μ–΄**: KC868-A6 (ESP32 + PCF8574)
- **νμ›¨μ–΄**: ESPHome 2025.5.2
- **λ°±μ—”λ“**: Python Flask
- **ν”„λ΅ νΈμ—”λ“**: HTML5 + CSS3 + JavaScript
- **ν†µμ‹ **: REST API (HTTP)
- **λ°μ΄ν„°λ² μ΄μ¤**: SQLite (λ΅κ·Έ)

## π“ μ§€μ› λ° λ¬Έμ

- **λ¬Έμ„**: [`κ°λ°μ£Όμμ‚¬ν•­.md`](./κ°λ°μ£Όμμ‚¬ν•­.md) β† π **ν•µμ‹¬ κ°€μ΄λ“**
- **GitHub Issues**: [μ΄μ λ“±λ΅](https://github.com/mkdata95/kc868-A6-control/issues)
- **KC868-A6 κ³µμ‹**: [KinCony ν¬λΌ](https://www.kincony.com/forum/)

## π“ λΌμ΄μ„ μ¤

MIT License - μμ λ΅­κ² μ‚¬μ©ν•μ„Έμ”!

---

**β­ μ΄ ν”„λ΅μ νΈκ°€ λ„μ›€μ΄ λμ—λ‹¤λ©΄ Starλ¥Ό λλ¬μ£Όμ„Έμ”!**

> π’΅ **μ™„μ „ν• κ°λ° κ³Όμ •κ³Ό λ¨λ“  ν•΄κ²° λ°©λ²•μ€ [`κ°λ°μ£Όμμ‚¬ν•­.md`](./κ°λ°μ£Όμμ‚¬ν•­.md)μ— μƒμ„Έν κΈ°λ΅λμ–΄ μμµλ‹λ‹¤.** 